{% extends "base.html" %} 
{% block content %} 

<div class="row">
	<div class="col span-12">
	<div class="cms">
		<h1> Routed Notification History</h1></div>
	
	<div class="row">
	
	<div id="repopiechart"></div>
	<div id="joupiechart"></div>
	
	</div>	
		<div class="col span-12">{% from
			"harvester/helpers/pagination.html" import render_pagination%} {{
			render_pagination(num_of_pages,page_num,link) }}</div>

			
			<h2>Repository</h2>
			
				<table id="publishertable">
					<tr>
					<th>DateSent</th>
					<th>DateAnalysed</th>
					<th>DOI</th>
					<th>AllianceLicense</th>
					<th>Repository</th>
					<th>MatchingCriteria</th>
					</tr>


				</table>
				
			{% from "harvester/helpers/pagination.html" import render_pagination%}
		{{ render_pagination(num_of_pages,page_num,link) }}
		<div class="row">
			<div class="col span-1"></div>
			<div class="col span-1"></div>
			<div class="col span-1"></div>
		</div>

		<div id='elem'></div>
	</div>	
	</div>

		
		


<script>
var obj = JSON.parse ({{ repo|tojson|safe }}); 

var node = [];

for (variable in obj.notifications) {
	var id = obj.notifications[variable].id;
	$('#publishertable tr:last').after('<tr>\
		<td>'+obj.notifications[variable].created_date+'</td> \
		<td>'+obj.notifications[variable].analysis_date+'</td> \
		<td>'+obj.notifications[variable].metadata.identifier.type+ +obj.notifications[variable].metadata.identifier.id+'</td> \
		<td>'Allianz Lizenz ja/nein/unklar' </td> \
		<td>'repositorium name' </td> \
		<td>'+obj.notifications[variable].provenance.explanation'</td> \
	</tr>'
	);
node[id] = new PrettyJSON.view.Node({
	el : $('#'+id),
	data : obj.notifictaions[variable]
 });
}
	
		
</script>


{% endblock %}
